<!DOCTYPE html>
<html>
 
  <head>
    <style>

      /* Start with everything initially off */
      #nothingDetectedVid1, #nothingDetectedVid2, #nothingDetectedVid3,
      #nothingDetectedText1, #nothingDetectedText2, #nothingDetectedText3,

      #driverBrakesVid1, #driverBrakesVid2, #driverBrakesVid3, #driverBrakesVid4,
      #driverBrakesText1, #driverBrakesText2, #driverBrakesText3, #driverBrakesText4,

      #systemBrakesVid1, #systemBrakesVid2, #systemBrakesVid3, #systemBrakesVid4, #systemBrakesVid5,
      #systemBrakesText1, #systemBrakesText2, #systemBrakesText3, #systemBrakesText4, #systemBrakesText5, 

      #noBrakingVid1, #noBrakingVid2, #noBrakingVid3, #noBrakingVid4,
      #noBrakingText1, #noBrakingText2, #noBrakingText3, #noBrakingText4,

      #ShowPreviousAssetButton, #ShowNextAssetButton {
        display: none;
      }

    </style>
  </head>
  
  <body>
    <div>
      <h1>Team CDLM's PBAS Prototype</h1>
      <h3>
        Our prototype serves to demonstrate all of the functionality that has been built
        into our Pedestrian Backup Assist System (PBAS). Please click the buttons below
        to go through our different scenarios. There are 4 scenarios that we want to 
        depict with our prototype.
      </h3>
      <h4>
        <ul>
          <li>
            <button 
              type = "button"
              onclick = "showNoObstacleDetectdStart()" 
              id = "NoObstacleDetectedButtonStart">
              No Obstacle Detected 
            </button>
          </li>
          <li>
            <button 
              type = "button"
              onclick = "showDriverBrakesStart()" 
              id = "DriverBrakesButtonStart">
              Obstacle Detected and the Driver Brakes 
            </button>
          </li>
          <li>
            <button 
              type = "button"
              onclick = "showSystemBrakesStart()" 
              id = "SystemBrakesButtonStart">
              Obstacle Detected and the System Brakes
            </button>
          </li>
          <li>
            <button 
              type = "button"
              onclick = "showNoBrakingOccursStart()" 
              id = "NoBrakingOccursButtonStart">
              Obstacle Detected and No Braking Occurs
            </button>
          </li>
        </ul>
      </h4>

      <!-- Nothing detected pic -->
      <video width="320" height="240" id="nothingDetectedVid1" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="nothingDetectedVid2" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="nothingDetectedVid3" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <!-- Driver Brakes -->
      <video width="320" height="240" id="driverBrakesVid1" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="driverBrakesVid2" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="driverBrakesVid3" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="driverBrakesVid4" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <!-- System Brakes -->
      <video width="320" height="240" id="systemBrakesVid1" controls autoplay >
        <source src="https://drive.google.com/file/d/1WxO-0UAU6HAHhXcFvY22IHt-Nkc723r3/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      
      <video width="320" height="240" id="systemBrakesVid2" controls autoplay >
        <source src="https://drive.google.com/file/d/1cwko-BEW4PxpYzwvPsQAm9l_g1pSRlDk/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      
      <video width="320" height="240" id="systemBrakesVid3" controls autoplay >
        <source src="https://drive.google.com/file/d/18oaCqgMbZKQU11L_km-ECMjHllykHIWd/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="systemBrakesVid4" controls autoplay >
        <source src="https://drive.google.com/file/d/1kG0J5rQr3ubJxtfByvS0rcdtlo3TcOG1/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="systemBrakesVid5" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <!-- No Brake -->
      <video width="320" height="240" id="noBrakingVid1" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="noBrakingVid2" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="noBrakingVid3" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="noBrakingVid4" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      
      <!-- Nothing detected text -->
      <p id="nothingDetectedText1">
        testing nothing detected 1
      </p>

      <p id="nothingDetectedText2">
        testing nothing detected 2 
      </p>

      <p id="nothingDetectedText3">
        testing nothing detected 3 
      </p>

      <!-- Driver Brakes text-->
      <p id="driverBrakesText1">
        testing driver brakes 1 
      </p>

      <p id="driverBrakesText2">
        testing driver brakes 2 
      </p>

      <p id="driverBrakesText3">
        testing driver brakes 3 
      </p>

      <p id="driverBrakesText4">
        testing driver brakes 4 
      </p>

      <!-- System Brakes Text -->
      <p id="systemBrakesText1">
        The driver shifts the gear into reverse.
        The VSES recognizes change in vehicle state and starts the PBAS.
        The camera and distance sensor turns on and the video feed is displayed on the infotainment console.
        The guiding lines are overlaid on the video feed.
      </p>

      <p id="systemBrakesText2">
        The driver backs up the vehicle.
      </p>

      <p id="systemBrakesText3">
        An obstacle moves into the path of the vehicle and is detected.
        The obstacle detection graphic is displayed over the obstacle on the infotainment console.
        The aural alert is played and the steering wheel rumbles.
        Since the obstacle was too close to the vehicle and in the critical distance zone, the system engaged the car brakes without driver input.
      </p>

      <p id="systemBrakesText4">
        The obstacle moves outside of the critical distance zones, which allows the system to give the driver back control. 
      </p>

      <p id="systemBrakesText5">
        The driver completes their backing event and continues operation of the vehicle as normal.
      </p>

      <!-- No Braking Text-->
      <p id="noBrakingText1">
        testing driver brakes 1 
      </p>

      <p id="noBrakingText2">
        testing driver brakes 2 
      </p>

      <p id="noBrakingText3">
        testing driver brakes 3 
      </p>

      <p id="noBrakingText4">
        testing driver brakes 4 
      </p>

      <!-- Previous button for nothing detected subsection -->
      <button 
        type = "button"
        onclick = "showPreviousAsset()" 
        id = "ShowPreviousAssetButton">
        Previous
      </button>
      
      <!-- Next button for nothing detected subsection -->
      <button 
        type = "button"
        onclick = "showNextAsset()" 
        id = "ShowNextAssetButton">
        Next
      </button>

    </div>
  
    <script>

      var noObstacleDetectedAssets = {
        "nothingDetectedVid1": {
          "display": "none",
          "hasNext": true,
          "hasPrevious": false, 
          "textId": "nothingDetectedText1",
          "textVisibility": "none"
        },
        "nothingDetectedVid2": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
          "textId": "nothingDetectedText2",
          "textVisibility": "none"
        },
        "nothingDetectedVid3": { 
          "display": "none",
          "hasNext": false,
          "hasPrevious": true, 
          "textId": "nothingDetectedText3",
          "textVisibility": "none"
        }
      };

      var driverBrakesAssets = {
        "driverBrakesVid1": {
          "display": "none",
          "hasNext": true,
          "hasPrevious": false, 
          "textId": "driverBrakesText1",
          "textVisibility": "none"
        },
        "driverBrakesVid2": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
          "textId": "driverBrakesText2",
          "textVisibility": "none"
        },
        "driverBrakesVid3": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
          "textId": "driverBrakesText3",
          "textVisibility": "none"
        },
        "driverBrakesVid4": { 
          "display": "none",
          "hasNext": false,
          "hasPrevious": true, 
          "textId": "driverBrakesText4",
          "textVisibility": "none"
        }
      };

      var systemBrakesAssets = {
        "systemBrakesVid1": {
          "display": "none",
          "hasNext": true,
          "hasPrevious": false, 
          "textId": "systemBrakesText1",
          "textVisibility": "none"
        },
        "systemBrakesVid2": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true,
          "textId": "systemBrakesText2",
          "textVisibility": "none"
        },
        "systemBrakesVid3": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true,
          "textId": "systemBrakesText3",
          "textVisibility": "none"
        },
        "systemBrakesVid4": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true,
          "textId": "systemBrakesText4",
          "textVisibility": "none"
        },
        "systemBrakesVid5": { 
          "display": "none",
          "hasNext": false,
          "hasPrevious": true,
          "textId": "systemBrakesText5",
          "textVisibility": "none"
        }
      };

      var noBrakingAssets = {
        "noBrakingVid1": {
          "display": "none",
          "hasNext": true,
          "hasPrevious": false, 
          "textId": "noBrakingText1",
          "textVisibility": "none"
        },
        "noBrakingVid2": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
          "textId": "noBrakingText2",
          "textVisibility": "none"
        },
        "noBrakingVid3": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
          "textId": "noBrakingText3",
          "textVisibility": "none"
        },
        "noBrakingVid4": { 
          "display": "none",
          "hasNext": false,
          "hasPrevious": true, 
          "textId": "noBrakingText4",
          "textVisibility": "none"
        }
      };

      var userChoseNoObstacleDetected = false;
      var userChoseDriverBrakes= false;
      var userChoseSystemBrakes= false;
      var userChoseNoBraking = false;

      function showNoObstacleDetectdStart() {

        // Show the correct picture
        turnOffAllAssets();
        
        // Turn on the initial video
        noObstacleDetectedAssets["nothingDetectedVid1"]["display"] = "block";
        document.getElementById('nothingDetectedVid1').style.display = noObstacleDetectedAssets["nothingDetectedVid1"]["display"];

        // Turn on the initial text 
        noObstacleDetectedAssets["nothingDetectedVid1"]["textVisibility"] = "block";
        document.getElementById( noObstacleDetectedAssets["nothingDetectedVid1"]["textId"] ).style.display = noObstacleDetectedAssets["nothingDetectedVid1"]["textVisibility"];
        
        HandleNextPreviousButtons();

        // Keep track of which option the user chose
        HandleUserSelection( "noObstacleDetected" );

      }

      function showDriverBrakesStart() {

        // Show the correct picture
        turnOffAllAssets();
        
        // Turn on the initial video
        driverBrakesAssets["driverBrakesVid1"]["display"] = "block";
        document.getElementById('driverBrakesVid1').style.display = driverBrakesAssets["driverBrakesVid1"]["display"];

        // Turn on the initial text 
        driverBrakesAssets["driverBrakesVid1"]["textVisibility"] = "block";
        document.getElementById( driverBrakesAssets["driverBrakesVid1"]["textId"] ).style.display = driverBrakesAssets["driverBrakesVid1"]["textVisibility"];

        HandleNextPreviousButtons();

        // Keep track of which option the user chose
        HandleUserSelection( "driverBrakes" );
      }

      function showSystemBrakesStart() {

        // Show the correct picture
        turnOffAllAssets();
        
        // Turn on the video
        systemBrakesAssets["systemBrakesVid1"]["display"] = "block";
        document.getElementById('systemBrakesVid1').style.display = systemBrakesAssets["systemBrakesVid1"]["display"];

        // Turn on the accompanying text 
        systemBrakesAssets["systemBrakesVid1"]["textVisibility"] = "block";
        document.getElementById( systemBrakesAssets["systemBrakesVid1"]["textId"] ).style.display = systemBrakesAssets["systemBrakesVid1"]["textVisibility"];

        HandleNextPreviousButtons();
        
        // Keep track of which option the user chose
        HandleUserSelection( "systemBrakes" );
      }
      
      function showNoBrakingOccursStart() {
        
        // Show the correct picture
        turnOffAllAssets();
        
        // Turn on the original video
        noBrakingAssets["noBrakingVid1"]["display"] = "block";
        document.getElementById('noBrakingVid1').style.display = noBrakingAssets["noBrakingVid1"]["display"];

        // Turn on the text
        noBrakingAssets["noBrakingVid1"]["textVisibility"] = "block";
        document.getElementById( noBrakingAssets["noBrakingVid1"]["textId"] ).style.display = noBrakingAssets["noBrakingVid1"]["textVisibility"];

        HandleNextPreviousButtons();
        
        // Keep track of which option the user chose
        HandleUserSelection( "noBraking" );
      }
      
      function showNextAsset() {

        let assetsToUse = userChoseNoObstacleDetected ? noObstacleDetectedAssets : 
                          userChoseDriverBrakes ? driverBrakesAssets :
                          userChoseSystemBrakes ? systemBrakesAssets : noBrakingAssets; 

        // If there is another asset next, show it
        let getNext, movedAlready = false;
        Object.keys( assetsToUse ).forEach ( asset => {
          let currentAsset = assetsToUse[asset];

          if ( getNext && !movedAlready ) {

            // Turn the video on
            document.getElementById( asset ).style.display = "block";
            currentAsset["display"] = "block";

            // Turn the text on
            document.getElementById( currentAsset["textId"] ).style.display = "block";
            currentAsset["textVisibility"] = "block";

            if ( !currentAsset["hasNext"] ){
              document.getElementById('ShowNextAssetButton').style.display = "none";
            }
            if ( currentAsset["hasPrevious"] ){
              document.getElementById('ShowPreviousAssetButton').style.display = "inline-block";
            }

            movedAlready = true;
          }

          if ( currentAsset["display"] == "block" && !movedAlready ) {
            if ( currentAsset["hasNext"] ) {
              getNext = true;

              // Turn the video off
              document.getElementById( asset ).style.display = "none";
              currentAsset["display"] = "none";

              // Turn the text off 
              document.getElementById( currentAsset["textId"] ).style.display = "none";
              currentAsset["textVisibility"] = "none";
            }
          }
        });
      }

      function showPreviousAsset() {

        let assetsToUse = userChoseNoObstacleDetected ? noObstacleDetectedAssets : 
                          userChoseDriverBrakes ? driverBrakesAssets :
                          userChoseSystemBrakes ? systemBrakesAssets : noBrakingAssets; 

        // If there is another asset previously, show it
        let getPrevious, movedAlready = false;
        Object.keys( assetsToUse ).reverse().forEach ( asset => {
          let currentAsset = assetsToUse[asset];

            if ( getPrevious && !movedAlready ) {
              
              // Turn the video on
              document.getElementById( asset ).style.display = "block";
              currentAsset["display"] = "block";

              // Turn the text on
              document.getElementById( currentAsset["textId"] ).style.display = "block";
              currentAsset["textVisibility"] = "block";

              if ( !currentAsset["hasPrevious"] ){
                document.getElementById('ShowPreviousAssetButton').style.display = "none";
              }
              if ( currentAsset["hasNext"] ) {
                document.getElementById('ShowNextAssetButton').style.display = "inline-block";
              }
              movedAlready = true;
            }
  
            if ( currentAsset["display"] == "block" && !movedAlready ) {
              if ( currentAsset["hasPrevious"] ) {
                getPrevious = true;

                // Turn the video off
                document.getElementById( asset ).style.display = "none";
                currentAsset["display"] = "none";
  
                // Turn the text off 
                document.getElementById( currentAsset["textId"] ).style.display = "none";
                currentAsset["textVisibility"] = "none";
              }
            }
        });
      }

      function turnOffAllAssets() {

        Object.keys( noObstacleDetectedAssets ).forEach ( asset => {
          noObstacleDetectedAssets[asset]["display"] = "none";
          document.getElementById( asset ).style.display = "none";

          noObstacleDetectedAssets[asset]["textVisibility"] = "none";
          document.getElementById( noObstacleDetectedAssets[asset]["textId"] ).style.display = "none";
        });
        Object.keys( driverBrakesAssets ).forEach ( asset => {
          driverBrakesAssets[asset]["display"] = "none";
          document.getElementById( asset ).style.display = "none";

          driverBrakesAssets[asset]["textVisibility"] = "none";
          document.getElementById( driverBrakesAssets[asset]["textId"] ).style.display = "none";
        });
        Object.keys( systemBrakesAssets ).forEach ( asset => {
          systemBrakesAssets[asset]["display"] = "none";
          document.getElementById( asset ).style.display = "none";

          systemBrakesAssets[asset]["textVisibility"] = "none";
          document.getElementById( systemBrakesAssets[asset]["textId"] ).style.display = "none";
        });
        Object.keys( noBrakingAssets ).forEach ( asset => {
          noBrakingAssets[asset]["display"] = "none";
          document.getElementById( asset ).style.display = "none";

          noBrakingAssets[asset]["textVisibility"] = "none";
          document.getElementById( noBrakingAssets[asset]["textId"] ).style.display = "none";
        });

      }

      function HandleNextPreviousButtons() {
        document.getElementById('ShowNextAssetButton').style.display = "inline-block";
        document.getElementById('ShowPreviousAssetButton').style.display = "none";
      }

      function HandleUserSelection( userSelection ) {

        userChoseNoObstacleDetected = userSelection == "noObstacleDetected";
        userChoseDriverBrakes = userSelection == "driverBrakes";
        userChoseSystemBrakes = userSelection == "systemBrakes";
        userChoseNoBraking = userSelection == "noBraking";

      }
      
    </script>
  </body>
 
</html>
