<!DOCTYPE html>
<html>
 
  <head>
    <style>

      /* Start with everything initially off */
      #nothingDetectedVid1, #nothingDetectedVid2, #nothingDetectedVid3,
      #driverBrakesVid1, #driverBrakesVid2, #driverBrakesVid3, 
      #systemBrakesVid1, #systemBrakesVid2, #systemBrakesVid3, #systemBrakesVid4, #systemBrakesVid5,
      #noBrakingVid1, #noBrakingVid2, #noBrakingVid3, 
      #ShowPreviousAssetButton, #ShowNextAssetButton {
        display: none;
      }

    </style>
  </head>
  
  <body>
    <div>
      <h1>Team CDLM's PBAS Prototype</h1>
      <h3>
        Our prototype serves to demonstrate all of the functionality that has been built
        into our Pedestrian Backup Assist System (PBAS). Please click the buttons below
        to go through our different scenarios. There are 4 scenarios that we want to 
        depict with our prototype.
      </h3>
      <h4>
        <ul>
          <li>
            <button 
              type = "button"
              onclick = "showNoObstacleDetectdStart()" 
              id = "NoObstacleDetectedButtonStart">
              No Obstacle Detected 
            </button>
          </li>
          <li>
            <button 
              type = "button"
              onclick = "showDriverBrakesStart()" 
              id = "DriverBrakesButtonStart">
              Obstacle Detected and the Driver Brakes 
            </button>
          </li>
          <li>
            <button 
              type = "button"
              onclick = "showSystemBrakesStart()" 
              id = "SystemBrakesButtonStart">
              Obstacle Detected and the System Brakes
            </button>
          </li>
          <li>
            <button 
              type = "button"
              onclick = "showNoBrakingOccursStart()" 
              id = "NoBrakingOccursButtonStart">
              Obstacle Detected and No Braking Occurs
            </button>
          </li>
        </ul>
      </h4>

      <!-- Nothing detected pic -->
      <video width="320" height="240" id="nothingDetectedVid1" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="nothingDetectedVid2" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="nothingDetectedVid3" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <!-- Driver Brakes -->
      <video width="320" height="240" id="driverBrakesVid1" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="driverBrakesVid2" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="driverBrakesVid3" controls autoplay >
        <source src="https://drive.google.com/file/d/1dRLqKypkNAg8Tsxi5m4l5Gv7zBEouIIO/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <!-- System Brakes -->
      <video width="320" height="240" id="systemBrakesVid1" controls autoplay >
        <source src="https://drive.google.com/file/d/1WxO-0UAU6HAHhXcFvY22IHt-Nkc723r3/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      
      <video width="320" height="240" id="systemBrakesVid2" controls autoplay >
        <source src="https://drive.google.com/file/d/1cwko-BEW4PxpYzwvPsQAm9l_g1pSRlDk/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      
      <video width="320" height="240" id="systemBrakesVid3" controls autoplay >
        <source src="https://drive.google.com/file/d/18oaCqgMbZKQU11L_km-ECMjHllykHIWd/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="systemBrakesVid4" controls autoplay >
        <source src="https://drive.google.com/file/d/1kG0J5rQr3ubJxtfByvS0rcdtlo3TcOG1/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="systemBrakesVid5" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <!-- No Brake -->
      <video width="320" height="240" id="noBrakingVid1" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="noBrakingVid2" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <video width="320" height="240" id="noBrakingVid3" controls autoplay >
        <source src="https://drive.google.com/file/d/1zxhKaXeWrjF54hsN-kvzkyArsqcgiyNT/view?usp=sharing" type="video/mp4">
        Your browser does not support the video tag.
      </video>

      <!-- Previous button for nothing detected subsection -->
      <button 
        type = "button"
        onclick = "showPreviousAsset()" 
        id = "ShowPreviousAssetButton">
        Previous
      </button>
      
      <!-- Next button for nothing detected subsection -->
      <button 
        type = "button"
        onclick = "showNextAsset()" 
        id = "ShowNextAssetButton">
        Next
      </button>

    </div>
  
    <script>

      var noObstacleDetectedAssets = {
        "nothingDetectedVid1" : {
          "display": "none",
          "hasNext": true,
          "hasPrevious": false, 
        },
        "nothingDetectedVid2": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
        },
        "nothingDetectedVid3": { 
          "display": "none",
          "hasNext": false,
          "hasPrevious": true, 
        }
      };

      var driverBrakesAssets = {
        "driverBrakesVid1" : {
          "display": "none",
          "hasNext": true,
          "hasPrevious": false, 
        },
        "driverBrakesVid2": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
        },
        "driverBrakesVid3": { 
          "display": "none",
          "hasNext": false,
          "hasPrevious": true, 
        }
      };

      var systemBrakesAssets = {
        "systemBrakesVid1" : {
          "display": "none",
          "hasNext": true,
          "hasPrevious": false, 
        },
        "systemBrakesVid2": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
        },
        "systemBrakesVid3": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
        },
        "systemBrakesVid4": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
        },
        "systemBrakesVid5": { 
          "display": "none",
          "hasNext": false,
          "hasPrevious": true, 
        }
      };

      var noBrakingAssets = {
        "noBrakingVid1" : {
          "display": "none",
          "hasNext": true,
          "hasPrevious": false, 
        },
        "noBrakingVid2": { 
          "display": "none",
          "hasNext": true,
          "hasPrevious": true, 
        },
        "noBrakingVid3": { 
          "display": "none",
          "hasNext": false,
          "hasPrevious": true, 
        }
      };

      var userChoseNoObstacleDetected = false;
      var userChoseDriverBrakes= false;
      var userChoseSystemBrakes= false;
      var userChoseNoBraking = false;

      function showNoObstacleDetectdStart() {

        // Show the correct picture
        turnOffAllAssets();
        noObstacleDetectedAssets["nothingDetectedVid1"]["display"] = "block";
        document.getElementById('nothingDetectedVid1').style.display = noObstacleDetectedAssets["nothingDetectedVid1"]["display"];

        HandleNextPreviousButtons();

        // Keep track of which option the user chose
        HandleUserSelection( "noObstacleDetected" );

      }

      function showDriverBrakesStart() {

        // Show the correct picture
        turnOffAllAssets();
        driverBrakesAssets["driverBrakesVid1"]["display"] = "block";
        document.getElementById('driverBrakesVid1').style.display = driverBrakesAssets["driverBrakesVid1"]["display"];

        HandleNextPreviousButtons();

        // Keep track of which option the user chose
        HandleUserSelection( "driverBrakes" );
      }

      function showSystemBrakesStart() {

        // Show the correct picture
        turnOffAllAssets();
        systemBrakesAssets["systemBrakesVid1"]["display"] = "block";
        document.getElementById('systemBrakesVid1').style.display = systemBrakesAssets["systemBrakesVid1"]["display"];

        HandleNextPreviousButtons();
        
        // Keep track of which option the user chose
        HandleUserSelection( "systemBrakes" );
      }
      
      function showNoBrakingOccursStart() {
        
        // Show the correct picture
        turnOffAllAssets();
        noBrakingAssets["noBrakingVid1"]["display"] = "block";
        document.getElementById('noBrakingVid1').style.display = noBrakingAssets["noBrakingVid1"]["display"];

        HandleNextPreviousButtons();
        
        // Keep track of which option the user chose
        HandleUserSelection( "noBraking" );
      }
      
      function showNextAsset() {

        let assetsToUse = userChoseNoObstacleDetected ? noObstacleDetectedAssets : 
                          userChoseDriverBrakes ? driverBrakesAssets :
                          userChoseSystemBrakes ? systemBrakesAssets : noBrakingAssets; 

        // If there is another asset next, show it
        let getNext, movedAlready = false;
        Object.keys( assetsToUse ).forEach ( asset => {
          let currentAsset = assetsToUse[asset];

          if ( getNext && !movedAlready ) {
            document.getElementById( asset ).style.display = "block";
            currentAsset["display"] = "block";
            if ( !currentAsset["hasNext"] ){
              document.getElementById('ShowNextAssetButton').style.display = "none";
            }
            if ( currentAsset["hasPrevious"] ){
              document.getElementById('ShowPreviousAssetButton').style.display = "inline-block";
            }

            movedAlready = true;
          }

          if ( currentAsset["display"] == "block" && !movedAlready ) {
            if ( currentAsset["hasNext"] ) {
              getNext = true;
              document.getElementById( asset ).style.display = "none";
              currentAsset["display"] = "none";
            }
          }
        });
      }

      function showPreviousAsset() {

        let assetsToUse = userChoseNoObstacleDetected ? noObstacleDetectedAssets : 
                          userChoseDriverBrakes ? driverBrakesAssets :
                          userChoseSystemBrakes ? systemBrakesAssets : noBrakingAssets; 

        // If there is another asset previously, show it
        let getPrevious, movedAlready = false;
        Object.keys( assetsToUse ).reverse().forEach ( asset => {
          let currentAsset = assetsToUse[asset];

            if ( getPrevious && !movedAlready ) {
              document.getElementById( asset ).style.display = "block";
              currentAsset["display"] = "block";
              if ( !currentAsset["hasPrevious"] ){
                document.getElementById('ShowPreviousAssetButton').style.display = "none";
              }
              if ( currentAsset["hasNext"] ) {
                document.getElementById('ShowNextAssetButton').style.display = "inline-block";
              }
              movedAlready = true;
            }
  
            if ( currentAsset["display"] == "block" && !movedAlready ) {
              if ( currentAsset["hasPrevious"] ) {
                getPrevious = true;
                document.getElementById( asset ).style.display = "none";
                currentAsset["display"] = "none";
  
              }
            }
        });
      }

      function turnOffAllAssets() {

        Object.keys( noObstacleDetectedAssets ).forEach ( asset => {
          noObstacleDetectedAssets[asset]["display"] = "none";
          document.getElementById( asset ).style.display = "none";
        });
        Object.keys( driverBrakesAssets ).forEach ( asset => {
          driverBrakesAssets[asset]["display"] = "none";
          document.getElementById( asset ).style.display = "none";
        });
        Object.keys( systemBrakesAssets ).forEach ( asset => {
          systemBrakesAssets[asset]["display"] = "none";
          document.getElementById( asset ).style.display = "none";
        });
        Object.keys( noBrakingAssets ).forEach ( asset => {
          noBrakingAssets[asset]["display"] = "none";
          document.getElementById( asset ).style.display = "none";
        });

      }

      function HandleNextPreviousButtons() {
        document.getElementById('ShowNextAssetButton').style.display = "inline-block";
        document.getElementById('ShowPreviousAssetButton').style.display = "none";
      }

      function HandleUserSelection( userSelection ) {

        userChoseNoObstacleDetected = userSelection == "noObstacleDetected";
        userChoseDriverBrakes = userSelection == "driverBrakes";
        userChoseSystemBrakes = userSelection == "systemBrakes";
        userChoseNoBraking = userSelection == "noBraking";

      }
      
    </script>
  </body>
 
</html>
